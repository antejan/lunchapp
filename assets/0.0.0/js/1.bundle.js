webpackJsonp([1],{214:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(215),r=a(216),u=n(r),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.onShow=function(){var e=this;setTimeout(function(){e.$el.removeClass("wrapper-propose")},3e3)},t.prototype.serializeData=function(){return{model:this.model,savedLunches:this.model.getSavedLunches(),mergedLunches:this.model.getMergedLunches()}};var a=t;return t=(0,o.Prototype)({template:u["default"],className:"wrapper wrapper-propose"})(t)||t}(l.BaseLayout);t.ProposeLayout=c},215:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"];Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e);var a=t;return t=(0,n.Prototype)({className:"wrapper"})(t)||t}(n.LayoutView);t.BaseLayout=o},216:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n=this.escapeExpression;return n(t.view.call(e,a(217),{name:"view",hash:{model:null!=e?e.model:e},data:s}))+' <div class="list"> '+n(t.view.call(e,a(219),{name:"view",hash:{model:null!=e?e.model:e},data:s}))+" "+n(t.view.call(e,a(221),{name:"view",hash:{state:null!=e?e.model:e,collection:null!=e?e.mergedLunches:e},data:s}))+" "+n(t.view.call(e,a(225),{name:"view",hash:{state:null!=e?e.model:e,collection:null!=e?e.todayLunches:e},data:s}))+" </div> "+n(t.view.call(e,a(227),{name:"view",hash:{model:null!=e?e.model:e},data:s}))},useData:!0})},217:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(218),r=n(l),u=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.templateHelpers=function(){return{date:this.model.getTimeSource().getTime()}};var a=t;return t=(0,o.Prototype)({template:r["default"]})(t)||t}(o.LayoutView);t.BaseHeader=u},218:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){var s=this.escapeExpression;return'<h1 class="logo"><img src="'+s(t.baseUrl.call(e,"/images/die-wurststube.png",{name:"baseUrl",hash:{},data:i}))+'" alt="die Wurschtstube"></h1> <div class="title"> <h2 class="title-main">'+s(t.moment.call(e,null!=e?e.date:e,{name:"moment",hash:{format:"dddd D.MM.YYYY"},data:i}))+"</h2> </div>"},useData:!0})},219:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(220),r=n(l),u=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.templateHelpers=function(){return{user:this.model.getUser()}};var a=t;return t=(0,o.Prototype)({template:r["default"],className:"list-title"})(t)||t}(o.LayoutView);t.ProposeTitle=u},220:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){return'<h3 class="list-title-main">Hey <strong>'+this.escapeExpression(t.userName.call(e,null!=e?e.user:e,{name:"userName",hash:{},data:i}))+"</strong>, what would you like for lunch?</h3>"},useData:!0})},221:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(222),r=a(224),u=n(r),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.childViewOptions=function(){return{state:this.options.state}};var a=t;return t=(0,o.Prototype)({template:u["default"],className:"list-items",childView:l.ProposeListItem})(t)||t}(o.CompositeView);t.ProposeLists=c},222:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(223),r=n(l),u=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.initialize=function(){this.modelClone=this.findInTodayLunches()||this.model.clone()},t.prototype.findInTodayLunches=function(){return this.options.state.getTodayLunches().find(this.model.toJSON())},t.prototype.templateHelpers=function(){return{checked:Boolean(this.findInTodayLunches())}},t.prototype.onChangeCheckbox=function(){var e=this.ui.chk.prop("checked");this.options.state.toggleProposeToday(this.modelClone,e)};var a=t;return t=(0,o.Prototype)({template:r["default"],className:"list-item",ui:{chk:"input[type=checkbox]"},events:{"change @ui.chk":"onChangeCheckbox"}})(t)||t}(o.LayoutView);t.ProposeListItem=u},223:function(e,t,a){var i=a(101);e.exports=i.template({1:function(e,t,a,i){return"checked"},3:function(e,t,a,i){var s=this.lambda,n=this.escapeExpression;return" "+n(s(null!=e?e.meal:e,e))+' <small class="name">('+n(s(null!=e?e.proposer:e,e))+")</small> "},5:function(e,t,a,i){return" "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+" "},7:function(e,t,a,i){return'<a target="_blank" href="'+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+'" class="list-item-link fa fa-cutlery"></a>'},9:function(e,t,a,i){return'<a target="_blank" href="'+this.escapeExpression(this.lambda(null!=e?e["recipe-url"]:e,e))+'" class="list-item-link fa fa-cutlery"></a>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){var s;return'<label class="list-item-label"> <input type="checkbox" '+(null!=(s=t["if"].call(e,null!=e?e.checked:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?s:"")+" /> "+(null!=(s=t["if"].call(e,null!=e?e.meal:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.program(5,i,0),data:i}))?s:"")+"</label> "+(null!=(s=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?s:"")+" "+(null!=(s=t["if"].call(e,null!=e?e["recipe-url"]:e,{name:"if",hash:{},fn:this.program(9,i,0),inverse:this.noop,data:i}))?s:"")+" "},useData:!0})},224:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){return""},useData:!0})},225:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(203),r=a(226),u=n(r),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.initialize=function(){this.model=l.Lunch.factoryFromData({proposer:this.options.state.getUser().getFirstName()})},t.prototype.showForm=function(){this.ui.btnShowForm.addClass("hidden"),this.ui.form.removeClass("hidden")},t.prototype.onChangeType=function(e){var t=$(e.target).val();this.ui.formCook.toggleClass("hidden","cook"!==t),this.ui.formRestaurant.toggleClass("hidden","restaurant"!==t),this.ui.chkSave.toggleClass("hidden","restaurant"!==t)},t.prototype.onInput=function(e){var t=e.target.name,a=$.trim($(e.target).val());this.model.set(t,a)},t.prototype.onSaveClick=function(){var e=this.ui.type.filter(":checked").val(),t="restaurant"===e&&this.ui.chkSaveInput.prop("checked");this.model.get("name")||this.model.get("meal")?("cook"===e?(this.model.unset("name"),this.model.unset("url")):(this.model.unset("meal"),this.model.unset("recipe-url")),this.options.state.proposeLunch(this.model,t),this.model=l.Lunch.factoryFromData({proposer:this.options.state.getUser().getFirstName()}),this.render()):this.$("input[name="+("cook"===e?"meal":"name")+"]").focus()};var a=t;return t=(0,o.Prototype)({template:u["default"],className:"list-item",ui:{btnShowForm:".ui-btn-show-form",form:".form",formCook:".ui-form-cook",formRestaurant:".ui-form-restaurant",type:"input[name=proposal_type]",chkSave:".ui-chk-save",chkSaveInput:".ui-chk-save input",inputs:"input[type=text][name]",btnCancel:".ui-btn-cancel",btnSave:".ui-btn-save"},events:{"click @ui.btnShowForm":"showForm","click @ui.btnCancel":"render","click @ui.btnSave":"onSaveClick","change @ui.type":"onChangeType","input @ui.inputs":"onInput"}})(t)||t}(o.LayoutView);t.ProposeForm=c},226:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){return'<div class="list-item-btn ui-btn-show-form"> <i class="fa fa-plus-circle"></i> Add proposal </div> <div class="form hidden"> <div class="form-title">Add proposal</div> <ul class="radios radios-hor"> <li> <label class="check"> <input type="radio" name="proposal_type" value="cook" checked /> I want cook... </label> </li> <li> <label class="check"> <input type="radio" name="proposal_type" value="restaurant" /> I want to eat at... </label> </li> </ul> <div class="ui-form-cook"> <div class="input"> <label for="input-meal">Meal</label> <input type="text" id="input-meal" name="meal" /> </div> <div class="input"> <label for="input-recipe-link">Link to recipe</label> <input type="text" id="input-recipe-link" name="recipe-url" /> </div> </div> <div class="ui-form-restaurant hidden"> <div class="input"> <label for="input-restaurant">Restaurant</label> <input type="text" id="input-restaurant" name="name" /> </div> <div class="input"> <label for="input-restaurant-link">Website</label> <input type="text" id="input-restaurant-link" name="url" /> </div> </div> <div class="form-controls"> <div class="form-controls-side"> <label class="hidden ui-chk-save check"> <input type="checkbox"/> Save<span class="desktop-only"> restaurant</span> </label> </div> <div class="form-controls-main"> <button class="btn btn-secondary ui-btn-cancel">cancel</button> <button class="btn ui-btn-done ui-btn-save">Done</button> </div> </div> </div>'},useData:!0})},227:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(125),r=a(228),u=a(230),c=a(232),p=n(c),d=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.initialize=function(){this.listenTo(this.model.getTimeSource(),"tick",this.onTick)},t.prototype.onClickSave=function(){var e=this;this.model.getTodayLunches().length?(this.model.getTodayLunches().invoke("save"),l.app.content.show(new r.SuccessSave({model:this.model,waitForStage:"choose"}))):(this.ui.button.addClass("shake"),setTimeout(function(){e.ui.button.removeClass("shake")},1e3))},t.prototype.onTick=function(){var e=this.model.getTimeSource().leftInStage("propose");if(0>=e)return void l.app.content.show(new u.TimeIsUp({message:"Suggest time was up to 11am.",button:"Go choose something!"}));if(6e5>e){this.warned=!0,this.ui.warning.removeClass("hidden-o");var t="Hurry up! You have ";t+=Math.floor(e/6e4)<=1?"less than one minute.":"only "+Math.floor(e/6e4)+" minutes left.",this.ui.warningMessage.text(t)}else this.warned=!1,this.ui.warning.addClass("hidden-o")};var a=t;return t=(0,o.Prototype)({template:p["default"],className:"list-controls",ui:{button:"button",warning:".warning",warningMessage:".warning-message"},events:{"click @ui.button":"onClickSave"}})(t)||t}(o.LayoutView);t.ProposeControls=d},228:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(229),r=n(l),u=a(126),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.initialize=function(){this.listenTo(this.model.getTimeSource(),"tick",this.onTick)},t.prototype.onTick=function(){this.model.getTimeSource().getStage()==this.options.waitForStage&&u.router.navigate("/",{trigger:!0})};var a=t;return t=(0,o.Prototype)({template:r["default"],className:"wrapper"})(t)||t}(o.LayoutView);t.SuccessSave=c},229:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){return'<div class="message"> <i class="message-badge message-badge-ok"></i> <div class="message-subtitle">Everything successfully saved.</div> <h2>See you later!</h2> </div> '},useData:!0})},230:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(231),r=n(l),u=a(126),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.onRender=function(){this.tick()},t.prototype.tick=function(){this.isDestroyed||(this.timeLeft>0?(this.timeLeft-=1,setTimeout(this.tick.bind(this),1e3)):this.goNext())},t.prototype.goNext=function(){u.router.navigate("/",{trigger:!0})},t.prototype.serializeData=function(){return this.options};var a=t;return t=(0,o.Prototype)({template:r["default"],className:"wrapper",ui:{button:"button",buttonFiller:".btn-filler"},events:{"click @ui.button":"goNext"},timeLeft:20})(t)||t}(o.LayoutView);t.TimeIsUp=c},231:function(e,t,a){var i=a(101);e.exports=i.template({1:function(e,t,a,i){return' <div class="message-subtitle">'+this.escapeExpression(this.lambda(null!=e?e.message:e,e))+"</div> "},3:function(e,t,a,i){return this.escapeExpression(this.lambda(null!=e?e.button:e,e))},5:function(e,t,a,i){return"Next"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){var s;return'<div class="message"> <i class="message-badge message-badge-bad"></i> <h2>Time\'s up!</h2> '+(null!=(s=t["if"].call(e,null!=e?e.message:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.noop,data:i}))?s:"")+' <p><button class="btn btn-L"><span class="btn-filler fillWidth"></span><span class="btn-label">'+(null!=(s=t["if"].call(e,null!=e?e.button:e,{name:"if",hash:{},fn:this.program(3,i,0),inverse:this.program(5,i,0),data:i}))?s:"")+"</span></button></p> </div> "},useData:!0})},232:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){return'<button class="btn btn-L">Send</button> <p class="warning hidden-o"><i class="fa fa-clock-o"></i> <span class="warning-message">Hurry up!</span></p>'},useData:!0})},234:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(215),r=a(235),u=n(r),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.serializeData=function(){var e=this.model.getTodayLunches();return e.length||e.set(this.model.getSavedLunches().invoke("clone")),{model:this.model,todayLunches:e}};var a=t;return t=(0,o.Prototype)({template:u["default"]})(t)||t}(l.BaseLayout);t.ChooseLayout=c},235:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n=this.escapeExpression;return n(t.view.call(e,a(217),{name:"view",hash:{model:null!=e?e.model:e},data:s}))+' <div class="list"> '+n(t.view.call(e,a(236),{name:"view",hash:{model:null!=e?e.model:e},data:s}))+" "+n(t.view.call(e,a(238),{name:"view",hash:{state:null!=e?e.model:e,collection:null!=e?e.todayLunches:e},data:s}))+" </div> "+n(t.view.call(e,a(242),{name:"view",hash:{model:null!=e?e.model:e},data:s}))},useData:!0})},236:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(237),r=n(l),u=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.templateHelpers=function(){return{user:this.model.getUser()}};var a=t;return t=(0,o.Prototype)({template:r["default"],className:"list-title"})(t)||t}(o.LayoutView);t.ChooseTitle=u},237:220,238:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(239),r=a(241),u=n(r),c=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.childViewOptions=function(){return{state:this.options.state}};var a=t;return t=(0,o.Prototype)({template:u["default"],childViewContainer:".list-items",childView:l.ChooseListItem})(t)||t}(o.CompositeView);t.ChooseLists=c},239:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(240),r=n(l),u=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.onChangeRadio=function(e){this.value=$(e.target).val(),this.model.setUserPoints(this.value,this.options.state.getUser()),this.refresh()},t.prototype.onRender=function(){this.value=this.model.getUserPoints(this.options.state.getUser()),this.ui.radio.filter("[value="+this.value+"]").prop("checked",!0),this.refresh()},t.prototype.refresh=function(){this.$el.toggleClass("list-item-selected",this.value>0),this.$el.toggleClass("list-item-negative",this.value<0)};var a=t;return t=(0,o.Prototype)({template:r["default"],className:"list-item",ui:{radio:"input[type=radio]"},events:{"change @ui.radio":"onChangeRadio"}})(t)||t}(o.LayoutView);t.ChooseListItem=u},240:function(e,t,a){var i=a(101);e.exports=i.template({1:function(e,t,a,i){var s=this.lambda,n=this.escapeExpression;return" "+n(s(null!=e?e.meal:e,e))+' <small class="name">('+n(s(null!=e?e.proposer:e,e))+")</small> "},3:function(e,t,a,i){return" "+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+" "},5:function(e,t,a,i){return'<a target="_blank" href="'+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+'" class="list-item-link fa fa-cutlery"></a>'},7:function(e,t,a,i){return'<a target="_blank" href="'+this.escapeExpression(this.lambda(null!=e?e["recipe-url"]:e,e))+'" class="list-item-link fa fa-cutlery"></a>'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){var s,n=this.lambda,o=this.escapeExpression;return'<div class="list-item-rating"> <div class="list-item-name"> '+(null!=(s=t["if"].call(e,null!=e?e.meal:e,{name:"if",hash:{},fn:this.program(1,i,0),inverse:this.program(3,i,0),data:i}))?s:"")+" </div> "+(null!=(s=t["if"].call(e,null!=e?e.url:e,{name:"if",hash:{},fn:this.program(5,i,0),inverse:this.noop,data:i}))?s:"")+" "+(null!=(s=t["if"].call(e,null!=e?e["recipe-url"]:e,{name:"if",hash:{},fn:this.program(7,i,0),inverse:this.noop,data:i}))?s:"")+' <ul class="rating"> <li class="rating-item"><label><input type="radio" name="rating-'+o(n(null!=e?e.id:e,e))+'" value="3"/></label></li> <li class="rating-item"><label><input type="radio" name="rating-'+o(n(null!=e?e.id:e,e))+'" value="2"/></label></li> <li class="rating-item"><label><input type="radio" name="rating-'+o(n(null!=e?e.id:e,e))+'" value="1"/></label></li> <li class="rating-item rating-item-negative"><label><input type="radio" name="rating-'+o(n(null!=e?e.id:e,e))+'" value="-1"/></label></li> </ul> </div> '},useData:!0})},241:function(e,t,a){var i=a(101);e.exports=i.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,i){return'<div class="rating-header"> <ul class="rating"> <li class="rating-item"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></li> <li class="rating-item"><i class="fa fa-star"></i><i class="fa fa-star"></i></li> <li class="rating-item"><i class="fa fa-star"></i></li> <li class="rating-item rating-item-negative"><i class="fa fa-frown-o"></i></li> </ul> </div> <div class="list-items"></div>'},useData:!0})},242:function(e,t,a){"use strict";var i=a(127)["default"],s=a(124)["default"],n=a(1)["default"];Object.defineProperty(t,"__esModule",{value:!0});var o=a(7),l=a(125),r=a(228),u=a(230),c=a(243),p=n(c),d=function(e){function t(){s(this,a),e.apply(this,arguments)}i(t,e),t.prototype.initialize=function(){this.listenTo(this.model.getTimeSource(),"tick",this.onTick)},t.prototype.onClickSave=function(){var e=this;this.model.getTodayLunches().haveUserPoints(this.model.getUser())?(this.model.getTodayLunches().invoke("save"),l.app.content.show(new r.SuccessSave({model:this.model,waitForStage:"result"}))):(this.ui.button.addClass("shake"),setTimeout(function(){e.ui.button.removeClass("shake")},1e3))},t.prototype.onTick=function(){var e=this.model.getTimeSource().leftInStage("choose");if(0>=e)return void l.app.content.show(new u.TimeIsUp({message:"Choose time was up to 11:30am.",button:"Show results!"}));if(6e5>e){this.warned=!0,this.ui.warning.removeClass("hidden-o");var t="Hurry up! You have ";t+=Math.floor(e/6e4)<=1?"less than one minute.":"only "+Math.floor(e/6e4)+" minutes left.",this.ui.warningMessage.text(t)}else this.warned=!1,this.ui.warning.addClass("hidden-o")};var a=t;return t=(0,o.Prototype)({template:p["default"],className:"list-controls",ui:{button:"button",warning:".warning",warningMessage:".warning-message"},events:{"click @ui.button":"onClickSave"}})(t)||t}(o.LayoutView);t.ChooseControls=d},243:232});